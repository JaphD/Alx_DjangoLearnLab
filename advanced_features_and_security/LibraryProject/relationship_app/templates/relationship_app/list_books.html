{% extends "base.html" %}

{% block title %}List of Books{% endblock %}

{% block content %}
  <h1>ðŸ“š Books Available</h1>

  {% if books %}
    <ul class="book-list">
      {% for book in books %}
        <li>
          <strong>{{ book.title }}</strong> by {{ book.author.name }}
          <em>({{ book.publication_year }})</em>

        {% if perms.relationship_app.can_edit or perms.relationship_app.can_delete %}
            <span class="book-actions">
              {% if perms.relationship_app.can_edit %}
                <a href="{% url 'relationship_app:book-edit' book.pk %}"
                   class="btn btn-sm btn-secondary">
                  Edit
                </a>
              {% endif %}
              {% if perms.relationship_app.can_delete %}
                <a href="{% url 'relationship_app:book-delete' book.pk %}"
                   class="btn btn-sm btn-danger">
                  Delete
                </a>
              {% endif %}
            </span>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No books available at the moment.</p>
  {% endif %}

  {% if perms.relationship_app.can_create %}
    <a href="{% url 'relationship_app:book-create' %}"
       class="btn btn-primary"
       style="margin: 1em 0;">
      âž• Add New Book
    </a>
  {% endif %}

  <form action="{% url 'bookshelf:logout' %}" method="post">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Logout</button>
  </form>
{% endblock %}

